!function(){function a(a,b){function c(a){var b=a.daily.data,c=a.hourly.data,d=[];c.sort(function(a,b){return a.time-b.time});for(var e=0;e<c.length;e++){var f=c[e],g=f.time,h=1e3*g,i=(new Date(h),f.precipIntensity);d.push([e,i])}({xaxis:{tickLength:1,mode:"time",minTickSize:[1,"hour"],min:(new Date).getTime()},yaxis:{max:b.precipIntensityMax}});$("#hourly-chart").css({width:"600px",height:"300px"}),$.plot($("#hourly-chart"),[d])}var d=[a,b].join(","),e=g+d;$.ajax({url:e,dataType:"jsonp",success:c})}function b(a,b){function c(a){var b=a.currently,c=b.time,d=b.precipIntensity,g=(c-e)/60;f.push([g,d]),f.sort(function(a,b){return a[0]-b[0]}),$("#minutely-chart").css({width:"600px",height:"300px"}),$.plot($("#minutely-chart"),[f])}for(var f=[],h=0;60>=h;h++,d+=60){var i=[a,b,d].join(","),j=g+i;$.ajax({url:j,dataType:"jsonp",success:c})}}function c(a){function b(){function a(){var a,b=window.location.search.substring(1),c={};if(-1!==b.search("&")){a=b.split("&");for(var d=0;d<a.length;d++){var e=a[d].split("="),f=e[0],g=decodeURIComponent(e[1]);if("undefined"==typeof c[f])c[f]=g;else if("string"==typeof c[f]){[c[f],g]}else c[f].push(g)}}else-1!==b.search(",")&&(a=b.split(","),isNaN(a[0])||isNaN(a[1])||(c.latitude=a[0],c.longitude=a[1]));return c}function b(a){function b(a){return!isNaN(a)}return"undefined"!=typeof a&&b(a)}for(var c,d,e=a(),f=[["lat","long"],["latitude","longitude"]],g=0;g<f.length;g++){var h=f[g],i=h[0],j=h[1];b(e[i])&&b(e[j])&&(c=e[i],d=e[j])}return"undefined"==typeof c&&"undefined"==typeof d?void 0:{latitude:parseFloat(c),longitude:parseFloat(d)}}for(var c=[b],d=0;d<c.length;d++){var e=c[d],f=e();if("undefined"!=typeof f){for(var g=0;g<a.length;g++){var h=a[g];h(f.latitude,f.longitude)}return}}alert("Sorry, we can not retrieve your current location.")}var d=Math.floor((new Date).getTime()/1e3),e=d,f="58150f7a0e5c13c0fd2eed55ce17884e",g="https://api.forecast.io/forecast/"+f+"/",h=[a,b];c(h)}();